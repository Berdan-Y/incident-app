<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:Maui.ViewModels"
             xmlns:components="clr-namespace:Maui.Components"
             xmlns:models="clr-namespace:Shared.Models.Enums;assembly=Shared"
             x:Class="Maui.Pages.AssignedIncidentsPage"
             x:DataType="viewmodels:AssignedIncidentsViewModel"
             Title="Assigned to me">

    <Grid RowDefinitions="Auto,*">
        <!-- Filters -->
        <Grid Grid.Row="0" 
              ColumnDefinitions="*,*"
              Padding="15,10">
            <VerticalStackLayout Grid.Column="0" Spacing="5" Margin="0,0,5,0">
                <Label Text="Status" 
                       FontAttributes="Bold"/>
                <Picker ItemsSource="{Binding StatusOptions}"
                        SelectedItem="{Binding SelectedStatusFilter}"
                        ItemDisplayBinding="{Binding DisplayName}"/>
            </VerticalStackLayout>
            
            <VerticalStackLayout Grid.Column="1" Spacing="5" Margin="5,0,0,0">
                <Label Text="Priority" 
                       FontAttributes="Bold"/>
                <Picker ItemsSource="{Binding PriorityOptions}"
                        SelectedItem="{Binding SelectedPriorityFilter}"
                        ItemDisplayBinding="{Binding DisplayName}"/>
            </VerticalStackLayout>
        </Grid>

        <!-- Incidents List -->
        <RefreshView Grid.Row="1"
                    Command="{Binding LoadIncidentsCommand}"
                    IsRefreshing="{Binding IsLoading}">
            <components:IncidentsList />
        </RefreshView>
    </Grid>

</ContentPage> 